<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dickerchen Test</title>
</head>
<body>
  <h1>JavaScript Test</h1>
  <div id="test-output"></div>
  
  <script>
    console.log('ğŸ”§ Testing JavaScript execution...');
    
    // Test 1: Basic API call
    async function testAPI() {
      try {
        const response = await fetch('/api/test');
        const data = await response.json();
        console.log('âœ… API Test:', data);
        document.getElementById('test-output').innerHTML += '<p>âœ… API Test: ' + JSON.stringify(data) + '</p>';
      } catch (error) {
        console.error('âŒ API Test failed:', error);
        document.getElementById('test-output').innerHTML += '<p>âŒ API Test failed: ' + error.message + '</p>';
      }
    }
    
    // Test 2: Leaderboard API
    async function testLeaderboard() {
      try {
        const response = await fetch('/api/leaderboard/combined');
        const data = await response.json();
        console.log('âœ… Leaderboard Test:', data);
        document.getElementById('test-output').innerHTML += '<p>âœ… Leaderboard Test: ' + data.length + ' users found</p>';
        document.getElementById('test-output').innerHTML += '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
      } catch (error) {
        console.error('âŒ Leaderboard Test failed:', error);
        document.getElementById('test-output').innerHTML += '<p>âŒ Leaderboard Test failed: ' + error.message + '</p>';
      }
    }
    
    // Test 3: Version.js availability
    function testVersion() {
      if (window.APP_VERSION) {
        console.log('âœ… Version available:', window.APP_VERSION);
        document.getElementById('test-output').innerHTML += '<p>âœ… Version: ' + window.APP_VERSION + '</p>';
      } else {
        console.log('âŒ Version not available');
        document.getElementById('test-output').innerHTML += '<p>âŒ Version not available</p>';
      }
    }
    
    // Run tests
    document.addEventListener('DOMContentLoaded', async () => {
      console.log('ğŸ Starting tests...');
      await testAPI();
      await testLeaderboard();
      testVersion();
    });
  </script>
</body>
</html>
